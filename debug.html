<!DOCTYPE html>
<html>
<head>
    <title>Debug Import</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 4px; overflow: auto; }
        .btn { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; margin: 5px; }
    </style>
</head>
<body>
    <h1>CRM Debug Tool</h1>
    <button class="btn" onclick="checkData()">Check Imported Data</button>
    <button class="btn" onclick="clearAll()">Clear All Data</button>
    <button class="btn" onclick="reimport()">Re-import Data</button>
    <div id="output"></div>
    <p><a href="/" class="btn">Go to CRM</a></p>

    <script>
        function checkData() {
            const allKeys = Object.keys(localStorage);
            const customerKeys = allKeys.filter(key => key.startsWith('customer_'));
            
            let output = `<h3>Debug Results:</h3>`;
            output += `<p>Total localStorage keys: ${allKeys.length}</p>`;
            output += `<p>Customer keys found: ${customerKeys.length}</p>`;
            
            if (customerKeys.length > 0) {
                output += `<h4>Customer Keys:</h4><ul>`;
                customerKeys.forEach(key => {
                    try {
                        const data = JSON.parse(localStorage.getItem(key));
                        output += `<li>${key}: ${data.companyName || 'No company name'}</li>`;
                    } catch (e) {
                        output += `<li>${key}: Error parsing data</li>`;
                    }
                });
                output += `</ul>`;
                
                // Show first customer data
                const firstCustomer = JSON.parse(localStorage.getItem(customerKeys[0]));
                output += `<h4>Sample Customer Data:</h4>`;
                output += `<pre>${JSON.stringify(firstCustomer, null, 2)}</pre>`;
            } else {
                output += `<p style="color: red;">No customer data found in localStorage!</p>`;
            }
            
            document.getElementById('output').innerHTML = output;
        }
        
        function clearAll() {
            const customerKeys = Object.keys(localStorage).filter(key => key.startsWith('customer_'));
            customerKeys.forEach(key => localStorage.removeItem(key));
            alert('All customer data cleared!');
            checkData();
        }
        
        function reimport() {
            clearAll();
            // Reimport the data
            const customers = {
                'customer_001': {"id":"customer_001","companyName":"My Pharmacist On Call","status":"Onboarding","affiliatePartner":"VOXO","nextStep":"Schedule Install","physicalAddress":"3426 Whittier Blvd, Los Angeles, CA, 90023","billingAddress":"3426 Whittier Blvd, Los Angeles, CA, 90023","primaryContact":{"name":"Jacqueline","email":"ashers.assistant@gmail.com","phone":"310-882-6661"},"authorizedSigner":{"name":"Asher Eghbali","email":"asher.eghbali@gmail.com","phone":""},"billingContact":{"name":"Asher Eghbali","email":"ahsher.eghbali@gmail.com","phone":"310-497-3109"},"notes":[{"content":"Mr. Manuel is the Voice contact at 323-408-3860.","timestamp":"2025-06-23T21:00:00.000Z"}],"createdAt":"2025-06-23T21:00:00.000Z","updatedAt":"2025-06-23T21:00:00.000Z"},
                'customer_002': {"id":"customer_002","companyName":"Berea Drug","status":"Onboarding","affiliatePartner":"VOXO","nextStep":"Perform Install","physicalAddress":"402 Richmond Road North, Berea, KY, 40403","billingAddress":"402 Richmond Road North, Berea, KY, 40403","primaryContact":{"name":"Robert Little","email":"bereadrug@yahoo.com","phone":"859-986-4521"},"authorizedSigner":{"name":"Robert Little","email":"bereadrug@yahoo.com","phone":""},"billingContact":{"name":"Robert Little","email":"bereadrug@yahoo.com","phone":"859-986-4521"},"notes":[{"content":"Installation Date: June 11, 2025","timestamp":"2025-06-23T21:00:00.000Z"},{"content":"Per call with Sally on 6/5/2025 -- Hardware is on site.","timestamp":"2025-06-23T21:00:00.000Z"}],"createdAt":"2025-06-23T21:00:00.000Z","updatedAt":"2025-06-23T21:00:00.000Z"},
                'customer_003': {"id":"customer_003","companyName":"Southeast Pharmacy","status":"Onboarding","affiliatePartner":"VOXO","nextStep":"Schedule Install","physicalAddress":"400 Parker Avenue North, STE 500A, Brooklet, GA, 30415","billingAddress":"400 Parker Avenue North, STE 500A, Brooklet, GA, 30415","primaryContact":{"name":"Shelby Hook","email":"hookrx@gmail.com","phone":"912-842-2040"},"authorizedSigner":{"name":"Shelby Hook","email":"hookrx@gmail.com","phone":""},"billingContact":{"name":"Shelby Hook","email":"hookrx@gmail.com","phone":"912-842-2040"},"notes":[{"content":"Z3 is ordered from Network Tigers and shipped directly to the site.","timestamp":"2025-06-23T21:00:00.000Z"}],"createdAt":"2025-06-23T21:00:00.000Z","updatedAt":"2025-06-23T21:00:00.000Z"}
            };
            
            for (const [id, customer] of Object.entries(customers)) {
                localStorage.setItem(id, JSON.stringify(customer));
            }
            
            alert('Re-imported 3 test customers');
            checkData();
        }
        
        // Auto-check on load
        checkData();
    </script>
</body>
</html>